import * as dotenv from 'dotenv'
dotenv.config()

export const projectsCmcIds = {
  Arweave: { slug: 'arweave', id: 5632 },
  Polybase: { slug: undefined, id: null },
  Akash: { slug: 'akash-network', id: 7431 },
  Incognito: { slug: 'incognito', id: 16459 },
  GenesysGo: { slug: 'genesysgo-shadow', id: 16868 },
  Foam: { slug: 'foam', id: 3631 },
  Databroker: { slug: 'databroker', id: 2913 },
  Jackal: { slug: 'jackal-protocol', id: 25261 },
  Saturn: { slug: 'saturn', id: 4654 },
  CUDOS: { slug: 'cudos', id: 8258 },
  TableLand: { slug: undefined, id: null },
  Theta: { slug: 'theta-token', id: null },
  Stratos: { slug: 'stratos', id: 9760 },
  Gensyn: { slug: undefined, id: null },
  BitTensor: { slug: 'bittensor', id: 22974 },
  Autonolas: { slug: undefined, id: null },
  TheGraph: { slug: 'the-graph', id: 6719 },
  Ocean: { slug: 'ocean-protocol', id: 3911 },
  Storx: { slug: 'storx-network', id: 10894 },
  Streamr: { slug: 'streamr', id: 2143 },
  WeatherFlow: { slug: undefined, id: null },
  Holo: { slug: 'holo', id: 2682 },
  Boring: { slug: 'boring-protocol', id: 11470 },
  'Fetch AI': { slug: 'fetch', id: 3773 },
  Filecoin: { slug: 'filecoin', id: 2280 },
  Crust: { slug: 'crust-network', id: null },
  Golem: { slug: 'golem-network-tokens', id: 1455 },
  NKN: { slug: 'nkn', id: 2780 },
  Lit: { slug: 'lit', id: 15784 },
  Mysterium: { slug: 'mysterium', id: 1721 },
  Orchid: { slug: 'orchid', id: 5026 },
  Storj: { slug: 'storj', id: 1772 },
  Soarchain: { slug: undefined, id: null },
  NATIX: { slug: undefined, id: null },
  'Fry Foundation': { slug: 'fryscrypto', id: 24874 },
  Constellation: { slug: 'constellation', id: 2868 },
  Sia: { slug: 'siacoin', id: 1042 },
  Verasity: { slug: 'verasity', id: 3816 },
  WeatherXM: { slug: undefined, id: null },
  Spexigon: { slug: undefined, id: null },
  WayRu: { slug: undefined, id: null },
  ASCENSIONWX: { slug: undefined, id: null },
  Deeper: { slug: 'deeper-network', id: 8894 },
  'Daylight Energy': { slug: undefined, id: null },
  Switch: { slug: 'switch-reward-card', id: 24302 },
  MetaBlox: { slug: undefined, id: null },
  Pollen: { slug: 'pollen', id: 10677 },
  Sentinel: { slug: 'sentinel', id: 2643 },
  'PAAL AI': { slug: 'paal-ai', id: 27178 },
  Crankk: { slug: undefined, id: null },
  SmartPoint: { slug: undefined, id: null },
  HealthBlocks: { slug: undefined, id: null },
  'FX Land': { slug: undefined, id: null },
  DIMO: { slug: 'dimo', id: 22837 },
  Nodle: { slug: 'nodleiot', id: 6837 },
  FOAM: { slug: 'foam', id: 3631 },
  EnergyWeb: { slug: 'energy-web-token', id: 5268 },
  'DeepBrain Chain': { slug: 'deepbrain-chain', id: 2316 },
  'GPU.net': { slug: undefined, id: null },
  Aleph: { slug: 'aleph-im', id: 5821 },
  Iagon: { slug: 'iagon', id: 11078 },
  'Rowen Energy': { slug: undefined, id: null },
  iExec: { slug: 'rlc', id: 1637 },
  'Nuco Cloud': { slug: 'nuco-cloud', id: 6933 },
  Zus: { slug: '0chain', id: 2882 },
  '2blox': { slug: undefined, id: null },
  MaidSafe: { slug: 'maidsafecoin', id: 291 },
  Element: { slug: 'hyperstake', id: 525 },
  Livepeer: { slug: 'livepeer', id: 3640 },
  Getdor: { slug: undefined, id: null },
  Meson: { slug: 'meson-network', id: 27026 },
  Media: { slug: 'media-network', id: 9524 },
  OriginTrail: { slug: 'origintrail', id: 2467 },
  Drife: { slug: 'drife', id: 10889 },
  'Render (OTOY)': { slug: 'render-token', id: null },
  'IoTeX Pebble': { slug: 'iotex', id: 2777 },
  Presearch: { slug: 'presearch', id: 2245 },
  Piphi: { slug: undefined, id: null },
  Dynex: { slug: 'dynex', id: 22858 },
  'Helium IOT': { slug: 'helium-iot', id: 24686 },
  HiveMapper: { slug: 'hivemapper', id: 22850 },
  CHIRP: { slug: 'chirp-network', id: 23445 },
  'Space and Time': { slug: undefined, id: null },
  MatchX: { slug: undefined, id: null },
  Ceramic: { slug: undefined, id: null },
  Ankr: { slug: 'ankr', id: 3783 },
  ScPrime: { slug: 'scprime', id: 4074 },
  XNET: { slug: undefined, id: null },
  Roko: { slug: undefined, id: null },
  'IoTeX UCAM': { slug: 'iotex', id: 2777 },
  Swarm: { slug: 'ethereum-swarm', id: 10293 },
  'Phala Network': { slug: 'phala-network', id: 6841 },
  AirTor: { slug: 'airtor-protocol', id: 23757 },
  Elumicate: { slug: undefined, id: null },
  Octa: { slug: 'octaspace', id: 24261 },
  'GreenPower Network': { slug: undefined, id: null },
  AscensionWx: { slug: undefined, id: null },
  WiCrypt: { slug: 'wicrypt', id: 11649 },
  Threefold: { slug: 'threefold', id: 6500 },
  mindland: { slug: undefined, id: null },
  Masq: { slug: 'masq', id: 8376 },
  'IoTeX W3bstream': { slug: 'iotex', id: 2777 },
  Kwill: { slug: undefined, id: null },
  'WiFi Map': { slug: 'wifi-map', id: 24133 },
  GPUtopia: { slug: undefined, id: null },
  Flux: { slug: 'zel', id: 3029 },
  'Wifi Dabba': { slug: undefined, id: null },
  '4EverLand': { slug: '4everland', id: 21345 },
  Hypercycle: { slug: 'hypercycle', id: 24698 },
  Onocoy: { slug: undefined, id: null },
  Koii: { slug: undefined, id: null },
  Fleek: { slug: undefined, id: null },
  'Planet Watch': { slug: 'planetwatch', id: 11861 },
  'World Mobile': { slug: 'world-mobile-token', id: 13769 },
  DriveX: { slug: undefined, id: null },
  Axis: { slug: 'axis-token', id: 8849 },
  Helium: { slug: 'helium', id: 5665 },
  REALLY: { slug: undefined, id: null },
  Pocket: { slug: 'pocket-network', id: 11823 },
  'Karrier One': { slug: undefined, id: null },
  GEODNET: { slug: 'geodnet', id: 20969 },
  Aydo: { slug: undefined, id: null },
  Bistroo: { slug: 'bistroo', id: 9889 },
  PowerLedger: { slug: 'power-ledger', id: 2132 },
  MapMetrics: { slug: 'mapmetrics', id: 18965 },
  Brave: { slug: 'basic-attention-token', id: 1697 },
  perkable: { slug: undefined, id: null },
  enviroBLOQ: { slug: 'iotex', id: 2777 },
  Arkreen: { slug: undefined, id: null },
  'Drop Wireless': { slug: undefined, id: null },
  'Helium 5G': { slug: 'helium-mobile', id: 24600 },
}

const commaSeparatedSlugs = () =>
  Object.values(projectsCmcIds)
    .map((p) => p.slug)
    .filter(Boolean)
    .join(',')

type Currency = { id: number; slug: string }

const logCMCCurrenciesIds = async () => {
  const response = await fetch(
    `${process.env.CMC_API_URL}/v2/cryptocurrency/quotes/latest?slug=${commaSeparatedSlugs()}`,
    {
      headers: { 'X-CMC_PRO_API_KEY': `${process.env.CMC_API_KEY}` },
    }
  )
  const { data } = (await response.json()) as { data: { [key: string]: Currency } }
  const result = {} as {
    [key in keyof typeof projectsCmcIds]?: { slug: string | undefined; id: number | null }
  }
  for (const p in projectsCmcIds) {
    const key = p as keyof typeof projectsCmcIds
    if (Object.prototype.hasOwnProperty.call(projectsCmcIds, key)) {
      const element = projectsCmcIds[key]
      result[key] = {
        ...element,
        id: Object.values(data).find((c) => c.slug === element.slug)?.id ?? null,
      }
    }
  }
  console.dir(result, { depth: null })
}

// logCMCCurrenciesIds()
